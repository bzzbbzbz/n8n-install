# –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ò–ò-–∞–≥–µ–Ω—Ç–∞ –¥–ª—è –≤—ã–¥–∞—á–∏ –∫—Ä–µ–¥–∏—Ç–æ–≤ –∏ –∫–æ–º–∞–Ω–¥—ã /give

## 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö (–í—ã–ø–æ–ª–Ω–µ–Ω–æ –≤ db.py)
–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∏ –ø–æ–ª—è:
- **users**: –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `nickname`, `bid`, `state`, `created_at`. –ü–æ–ª–µ `state` –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–º.
- **event_history**: –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–ø–µ—Ä–µ–≤–æ–¥—ã, –∏–≥—Ä—ã, –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è) –¥–ª—è –∞—É–¥–∏—Ç–∞.
- **ai_credit_sessions**: —Å–µ—Å—Å–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ –∫—Ä–µ–¥–∏—Ç–∞ (—Å—Ç–∞—Ç—É—Å, –æ—Ü–µ–Ω–∫–∞, –Ω–∞–≥—Ä–∞–¥–∞).
- **ai_dialogue_messages**: –∏—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏ —Å –±–æ—Ç–æ–º –≤ —Ä–∞–º–∫–∞—Ö —Å–µ—Å—Å–∏–∏ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

## 2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥—ã /give
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:** –ü–µ—Ä–µ–¥–∞—á–∞ –æ—á–∫–æ–≤ –æ—Ç –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥—Ä—É–≥–æ–º—É.
**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1.  –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥—ã: `/give <amount> <@username>`.
2.  –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–ø–æ–ª—É—á–∞—Ç–µ–ª—è –≤ –ë–î –ø–æ `nickname` –∏–ª–∏ `user_id` (–µ—Å–ª–∏ —ç—Ç–æ –æ—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ).
3.  –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è (`balance >= amount`).
4.  **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è**:
    *   –°–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ —É –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è.
    *   –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ–ª—É—á–∞—Ç–µ–ª—é.
    *   –ó–∞–ø–∏—Å—å –¥–≤—É—Ö —Å–æ–±—ã—Ç–∏–π –≤ `event_history` (`transfer_out` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, `transfer_in` –¥–ª—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è).
5.  –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —á–∞—Ç.

## 3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ò–ò-–∞–≥–µ–Ω—Ç–∞ (/credit)

### –ê. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (/credit)
1.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π**: –ë–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å <= 0 (–∏–ª–∏ –Ω–∏–∂–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞).
2.  **–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏**:
    *   –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ `ai_credit_sessions` —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `active`.
    *   –û–±–Ω–æ–≤–∏—Ç—å `users.state` –Ω–∞ `IN_DIALOGUE`.
3.  **–ü–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å**:
    *   –ë–æ—Ç (–ò–ò) –æ—Ç—ã–≥—Ä—ã–≤–∞–µ—Ç —Ä–æ–ª—å –∂–∞–¥–Ω–æ–≥–æ –±–∞–Ω–∫–∏—Ä–∞ –∫–∞–∑–∏–Ω–æ, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–†–∞—Å—Å–∫–∞–∂–∏ –∞–Ω–µ–∫–¥–æ—Ç, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∫—Ä–µ–¥–∏—Ç").
    *   –°–æ–æ–±—â–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `ai_dialogue_messages` (role: assistant).
    *   –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

### –ë. –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∏–∞–ª–æ–≥–∞ (Message Handler)
–ù—É–∂–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–Ω–µ –∫–æ–º–∞–Ω–¥), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `users.state`.

**–ï—Å–ª–∏ state == 'IN_DIALOGUE':**
1.  **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `ai_dialogue_messages` (role: user).
2.  **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**:
    *   –ò–∑–≤–ª–µ—á—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ `ai_dialogue_messages` –¥–ª—è —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏.
    *   –î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç: "–¢—ã —Å—Ç—Ä–æ–≥–∏–π –∏ –∂–∞–¥–Ω—ã–π –±–∞–Ω–∫–∏—Ä. –¢–≤–æ—è —Ü–µ–ª—å ‚Äî –æ—Ü–µ–Ω–∏—Ç—å –∞–Ω–µ–∫–¥–æ—Ç/–∏—Å—Ç–æ—Ä–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ï—Å–ª–∏ –∏—Å—Ç–æ—Ä–∏—è —Ö–æ—Ä–æ—à–∞—è, –≤—ã–¥–∞–π JSON —Å –æ—Ü–µ–Ω–∫–æ–π –∏ —Ñ–ª–∞–≥–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –≤—ã–¥–∞–π 0 –æ—á–∫–æ–≤."
3.  **–ó–∞–ø—Ä–æ—Å –∫ LLM**: –û—Ç–ø—Ä–∞–≤–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –≤ API (OpenAI/Anthropic/GigaChat).
4.  **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ LLM**:
    *   –ï—Å–ª–∏ LLM –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç:
        *   –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î (role: assistant).
        *   –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
    *   –ï—Å–ª–∏ LLM –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, JSON `{ "done": true, "score": 8, "comment": "–•–∞-—Ö–∞, –º–¥–∞, —Å–º–µ—à–Ω–æ" }`):
        *   –ü–µ—Ä–µ–π—Ç–∏ –∫ —à–∞–≥—É "–í. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏ –ù–∞–≥—Ä–∞–¥–∞".

### –í. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏ –ù–∞–≥—Ä–∞–¥–∞
1.  **–†–∞—Å—á–µ—Ç –Ω–∞–≥—Ä–∞–¥—ã**: –ù–∞–ø—Ä–∏–º–µ—Ä, `score * 10` –º–æ–Ω–µ—Ç.
2.  **–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ**:
    *   `UPDATE users SET balance = balance + reward`.
    *   `INSERT INTO event_history` (type: `credit_grant`).
3.  **–ó–∞–∫—Ä—ã—Ç–∏–µ —Å–µ—Å—Å–∏–∏**:
    *   `UPDATE ai_credit_sessions SET status = 'completed', ai_score = ..., reward_amount = ...`.
    *   `UPDATE users SET state = 'IDLE'`.
4.  **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ**: –ë–æ—Ç –ø–∏—à–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –≤–µ—Ä–¥–∏–∫—Ç –∏ —Å–æ–æ–±—â–∞–µ—Ç –æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏ —Å—Ä–µ–¥—Å—Ç–≤.

## 4. –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–∞–∫—Ä—É—Ç–∫–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

### –ê. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–ª–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (Forwarded Messages)
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –ë–æ—Ç –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∏–º–∞—Ç—å —ç–º–æ–¥–∑–∏ —Å–ª–æ—Ç–æ–≤ (üé∞, üé≤, üéØ, üèÄ, ‚öΩ, üé≥), –µ—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ—Å–ª–∞–Ω–Ω—ã–º (`message.forward_from` –∏–ª–∏ `message.forward_date` –Ω–µ –ø—É—Å—Ç—ã–µ).
**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
1.  –í —Ö–µ–Ω–¥–ª–µ—Ä–µ, –æ—Ç–≤–µ—á–∞—é—â–µ–º –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É dice/slots:
    *   –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞—Ç—Ä–∏–±—É—Ç `is_forwarded` (–≤ aiogram 3.x: `message.forward_origin is not None` –∏–ª–∏ `message.forward_date`).
    *   –ï—Å–ª–∏ `True` ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ –æ—Ç–≤–µ—Ç–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, —á—Ç–æ –ø–µ—Ä–µ—Å–ª–∞–Ω–Ω—ã–µ –±—Ä–æ—Å–∫–∏ –Ω–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è.

### –ë. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ–±—â–µ–Ω–∏—è (chat_restrictions)
**–ù–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ settings.toml:**
*   `block_private_chats` (bool): –ó–∞–ø—Ä–µ—Ç –∏–≥—Ä—ã –≤ –õ–°.
*   `allowed_chat_ids` (list[int]): –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ ID —á–∞—Ç–æ–≤.

**–õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ (Middleware –∏–ª–∏ –Ω–∞—á–∞–ª–æ –∫–∞–∂–¥–æ–≥–æ —Ö–µ–Ω–¥–ª–µ—Ä–∞):**
1.  –ü–æ–ª—É—á–∏—Ç—å `chat_id` –∏ `chat_type` —Ç–µ–∫—É—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.
2.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ –õ–°:**
    *   –ï—Å–ª–∏ `chat_type == 'private'` –ò `config.block_private_chats == True` ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ "–ò–≥—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–∞—Ö".
3.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ WhiteList:**
    *   –ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ `allowed_chat_ids` –Ω–µ –ø—É—Å—Ç –ò —Ç–µ–∫—É—â–∏–π `chat_id` –ù–ï –≤ —Å–ø–∏—Å–∫–µ ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ (–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å `leave_chat` –¥–ª—è –±–æ—Ç–∞, —á—Ç–æ–±—ã –æ–Ω —Å—Ä–∞–∑—É –≤—ã—Ö–æ–¥–∏–ª –∏–∑ "–ª–µ–≤—ã—Ö" –≥—Ä—É–ø–ø).

## 5. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î –∏ LLM –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ (`async/await`).
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ï—Å–ª–∏ LLM –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, —Å–æ–æ–±—â–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏ –Ω–µ "–∑–∞–≤–µ—à–∏–≤–∞—Ç—å" —Å–æ—Å—Ç–æ—è–Ω–∏–µ `IN_DIALOGUE` –Ω–∞–≤–µ—á–Ω–æ (—Ç–∞–π–º–∞—É—Ç—ã –∏–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –æ—Ç–º–µ–Ω—ã).
- **–õ–∏–º–∏—Ç—ã**: –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/credit`, –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è —Å–µ—Å—Å–∏—è –∏–ª–∏ –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ –º–∞–ª–æ –≤—Ä–µ–º–µ–Ω–∏ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤—ã–¥–∞—á–∏ –∏–ª–∏ –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–æ–ª—å—à–µ 0.

## 6. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Å—Ç–∞–≤–æ–∫ (/bid) (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:** –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –º–Ω–æ–∂–∏—Ç–µ–ª—å —Å—Ç–∞–≤–∫–∏ –¥–ª—è –∏–≥—Ä.
**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
1.  **–ö–æ–º–∞–Ω–¥–∞ /bid N**:
    *   –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —á–∏—Å–ª–æ N –∫–∞–∫ —Ç–µ–∫—É—â—É—é —Å—Ç–∞–≤–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î.
    *   –í–∞–ª–∏–¥–∞—Ü–∏—è: N > 0.
    *   **–í–∞-–±–∞–Ω–∫**: –ï—Å–ª–∏ N > —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞, —Å—Ç–∞–≤–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è –∫ —Ç–µ–∫—É—â–µ–º—É –±–∞–ª–∞–Ω—Å—É.
    *   –ë–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Å—Ç–∞–≤–∫—É.
2.  **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–æ–π (Dice/Slots)**:
    *   –ü–µ—Ä–µ–¥ –±—Ä–æ—Å–∫–æ–º –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å –±–∞–ª–∞–Ω—Å–∞.
    *   –ò–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ = `–±–∞–∑–æ–≤—ã–π_–≤—ã–∏–≥—Ä—ã—à * —Å—Ç–∞–≤–∫–∞`.
    *   –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤ `event_history` —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ (—Å—Ç–∞–≤–∫–∞, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—Ä–æ—Å–∫–∞).
